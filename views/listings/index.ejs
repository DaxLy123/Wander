<% layout('/layouts/boilerplate') -%>
<body>
    <h3>All Listings</h3>
        <!-- <form method="GET" action="/listings/new">
      <button>Create New Listing</button>
    </form> -->
 <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-3">
  <% for(let listing of allListings) { %>
 <a href="/listings/<%= listing._id %>" class="listing-link"> 
<div class="card col" style="width: 20rem;">



<%# Check if listing.image AND listing.image.url exist %>
<% if (listing.image && listing.image.url) { %>

  <%# If YES, show the real image %>
  <img src="<%= listing.image.url %>" class="card-img-top" alt="<%= listing.title %> " style ="height: 20rem">

<% } else { %>

  <%# If NO, show a default placeholder image %>
  <img src="https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8aG90ZWwlMjByb29tfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60" 
       class="card-img-top" 
       alt="Default listing image">

<% } %>


  <div class="card-img-overlay"></div>
  <div class="card-body">
    <p class="card-text"><b><%= listing.title %> </b>
    <br>
    &#8377 <%=listing.price ? Number(listing.price).toLocaleString("en-IN"): "N/A" %>/Night
  </p>
  </div>
</div>
</a>
 <% } %>
 </div>
   